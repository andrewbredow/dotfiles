#!/bin/bash
#
# Usage: git branch-prune
#
# Pulls down latest origin/master, then deletes any merged local branches
# and prunes any stale remote branches.
# Shamelessly stolen from @emilford

set -e

git checkout master
git pull --rebase origin master
git branch --merged | grep -v "\*" | xargs -n 1 git branch -d
git remote prune origin
git checkout -
